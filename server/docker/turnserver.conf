# coturn TURN Server Configuration
# For E2EE WebRTC NAT traversal
#
# Documentation: https://github.com/coturn/coturn/wiki/turnserver

# Network settings
listening-port=3478
tls-listening-port=5349

# Use fingerprint in TURN messages
fingerprint

# Long-term credential mechanism
lt-cred-mech

# Realm for authentication
realm=e2ee-webrtc.local

# Server name
server-name=e2ee-webrtc-turn

# TURN REST API (for dynamic credentials)
# use-auth-secret
# static-auth-secret=your-secret-here

# Static credentials (for development)
# Change these in production!
user=e2ee:e2ee-turn-password

# Allowed peer address range
# Deny private networks for security
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=100.64.0.0-100.127.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.0.0.0-192.0.0.255
denied-peer-ip=192.0.2.0-192.0.2.255
denied-peer-ip=192.88.99.0-192.88.99.255
denied-peer-ip=198.18.0.0-198.19.255.255
denied-peer-ip=198.51.100.0-198.51.100.255
denied-peer-ip=203.0.113.0-203.0.113.255
denied-peer-ip=240.0.0.0-255.255.255.255
denied-peer-ip=::1
denied-peer-ip=64:ff9b::-64:ff9b::ffff:ffff
denied-peer-ip=::ffff:0.0.0.0-::ffff:255.255.255.255
denied-peer-ip=100::-100::ffff:ffff:ffff:ffff
denied-peer-ip=2001::-2001:1ff:ffff:ffff:ffff:ffff:ffff:ffff
denied-peer-ip=2002::-2002:ffff:ffff:ffff:ffff:ffff:ffff:ffff
denied-peer-ip=fc00::-fdff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
denied-peer-ip=fe80::-febf:ffff:ffff:ffff:ffff:ffff:ffff:ffff

# Relay ports range
min-port=49152
max-port=49200

# Logging
log-file=stdout
verbose

# Disable old protocols
no-udp-relay
no-tcp-relay

# Enable STUN
stun-only=false

# Enable verbose logging for debugging (disable in production)
# Verbose

# Max allocations per user (prevent abuse)
user-quota=12
total-quota=1200

# Rate limiting
max-bps=0

# Mobility support
mobility
